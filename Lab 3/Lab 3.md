# INS300-1 LAB3
## Agenda
* [Introduction](#introduction)
    * [How it works](#how-it-works)
    * [Why is this important?](#why-is-this-important)
    * [Exercise lets get started](#exercise-lets-get-started)
* [Code chunks](#code-chunks)
    * [Supported programming languages](#supported-programming-languages)
    * [Code chunks options](#code-chunks-options)
    * [Code chunks example](#code-chunks-example)
    * [Exercise](#excercise-experiment-with-chunk-options)
* [Basic R Markdown](#basic-r-markdown)
    * [Headers](#headers)
    * [Emphasis](#emphasis)
    * [Blockquotes](#elockquotes)
    * [Lists](#lists)
        * [Unordered List](#unordered-list)
        * [Ordered List](#ordered-list)
        * [Mixed List](#mixed-list)
        * [Task List](#Task-list)
    * [Links](#links)
    * [Images](#images)
    * [Tables](#tables)
    * [Code Blocks](#code-blocks)
    * [Backslash Escapes](#backslash-escapes)
* [Caching](#caching)
    * [Excersice Add Caching](#excersice-add-caching)
    * [Excercise More Caching](#excercise-more-caching)
* [Parameters](#parameters)
* [Inline Code](#inline-code)
* [Tables](#tables)
* [References](#references)
## Introduction
R Markdown provides an authoring framework for data science. You can use a single R Markdown file to both:

* _save and execute code_
* _generate high quality reports that can be shared with an audience_

R Markdown documents are fully reproducible and support dozens of static and dynamic output formats.

<iframe src="https://player.vimeo.com/video/178485416?color=428bca&title=0&byline=0&portrait=0" width="640" height="400" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
<p><a href="https://vimeo.com/178485416">What is R Markdown?</a> from <a href="https://vimeo.com/rstudioinc">RStudio, Inc.</a> on <a href="https://vimeo.com">Vimeo</a>.</p>

### How it works:

When you run render, R Markdown feeds the .Rmd file to knitr ⧉, which executes all of the code chunks and creates a new markdown (.md) document which includes the code and it’s output.

The markdown file generated by knitr is then processed by pandoc ⧉ which is responsible for creating the finished format.

This may sound complicated, but R Markdown makes it extremely simple by encapsulating all of the above processing into a single render function.

![alt text](https://d33wubrfki0l68.cloudfront.net/61d189fd9cdf955058415d3e1b28dd60e1bd7c9b/b739c/lesson-images/rmarkdownflow.png)

### Why is this important?
One way to achieve the goal of having automated workflows and documentation that is always up to date is something called “literate programming”. **The idea in literate programming is that the documentation of a program—in the sense of the documentation of how the program works and how algorithms and data structures in the program work—is written together with the code implementing the program.**

### Exercise Lets Get Started
> #### Exercise 1: Create a new R Markdown Document
> Go to File > New File > R Markdown > Give it the title "LAB 3" and your name as author

**Notice that the file contains three types of content:**
- An (optional) YAML header surrounded by ---s
- R code chunks surrounded by ```s
- text mixed with simple text formatting


>#### Exercise 2: Open the R Markdown Quick References
>Go to File > Help > Markdown Quick Reference

> #### Excersice 3: R Markdown Cheatsheet
> Go to File > Help > Cheatsheets > R Markdown Cheat Sheet

## Code Chunks
In R Markdown, code chunks is used to display and render the result of a code snippet into the Markdown document. 
<pre lang="no-highlight"><code>
```{<programming-language> <name-of-chunk>, <chunk-option>}
    <insert code here>
```
</pre></code>

### Supported programming languages
Although R Markdown is used to render R, multiple other programming languages are also supported. This includes:

* Python
* SQL
* Bash
* Rcpp
* Stan
* JavaScript
* CSS

### Code chunk options
**include = FALSE**
Prevents code and results from appearing in the finished file. R Markdown still runs the code in the chunk, and other chunks can use the results.

**echo = FALSE**
Prevents code, but not the results from appearing in the finished file. This is a useful way to embed figures.

**message = FALSE**
prevents messages that are generated by code from appearing in the finished file.

**warning = FALSE** 
prevents warnings that are generated by code from appearing in the finished.

**fig.cap = "..."**
adds a caption to graphical results.

### Code Chunks Example
<pre lang="no-highlight"><code>
```{R lab3_demo_chunk}
a <- c(1, 2, 3, 4, 5)
b <- c(5, 4, 3, 2, 1)

df <- data.frame(x = a, y = b)

df
```
</pre></code>
**Expected output will be both the code and the result because we did not specify a chunk-option:**
```{R}
a <- c(1, 2, 3, 4, 5)
b <- c(5, 4, 3, 2, 1)

df <- data.frame(x = a, y = b)
```
```
##   x y
## 1 1 5
## 2 2 4
## 3 3 3
## 4 4 2
## 5 5 1
```

### Excercise Experiment with chunk options

> #### Excersice 1: Test the ´include = FALSE´ option
> Use the example above including the ´include = FALSE´ option. 
> Is the output different?

>#### Exercise 2: Test the ´echo = FALSE´ option
>Use the example above including the ´echo = FALSE´ option. 
>Is the output different?

## Basic R Markdown

The following subheaders include some basic Markdown syntax for altering the text. A reference list to R Markdown syntax can also be found in RStudio by doing the following:

> Go to File > Help > **Markdown Quick Reference**

The cheat sheet is also a nice feature to know about:
> Go to File > Help > Cheatsheets > **R Markdown Cheat Sheet**

### Headers
```markdown
# h1
## h2
### h3
#### h4
##### h5
###### h6
```
# h1
## h2
### h3
#### h4
##### h5
###### h6

### Emphasis
```markdown
**Hello World** or __Hello World__ Makes text bold
*Hello World* or _Hello World_ Makes text italic
~~Hello World~~ Makes strikethrough text
**_~~Hello World~~_** Makes text bold, italic and strikethrough
```

Example:

```markdown
**Dis** condimentum _scelerisque_ leo elit a, volutpat
aenean posuere torquent nullam dui, ultrices consequat
praesent eros diam, congue integer ~~eleifend~~ mattis.
Curae gravida __parturient__ ac **_bibendum_** nascetur volutpat nunc
tempus **himenaeos** leo, justo euismod hendrerit *non* etiam vivamus per tincidunt
lacus, metus duis conubia maecenas nisi ~~tellus~~ dignissim eleifend **_~~neque~~_**.
```
**Dis** condimentum _scelerisque_ leo elit a, volutpat
aenean posuere torquent nullam dui, ultrices consequat
praesent eros diam, congue integer ~~eleifend~~ mattis.
Curae gravida __parturient__ ac **_bibendum_** nascetur volutpat nunc
tempus **himenaeos** leo, justo euismod hendrerit *non* etiam vivamus per tincidunt
lacus, metus duis conubia maecenas nisi ~~tellus~~ dignissim eleifend **_~~neque~~_**.

### Blockquotes
```markdown
Someone awesome once wrote:
> # The future is now!
> Something awesome about technologies and stuff.
> Concluding with something awesome.
```
Someone awesome once wrote:
> # The future is now!
> Something awesome about technologies and stuff.
> Concluding with something awesome.

### Lists
#### Unordered List
```Markdown
* A
* B
* C

or 

- A
- B
- C
```
* A
* B
* C

#### Ordered List
```Markdown
1. A
2. B
3. C
4. D
```
1. A
2. B
3. C
4. D

#### Mixed List
```Markdown
1. A
2. B
    * 1
    * 2
    * 3
4. C
5. D
```
1. A
2. B
    * 1
    * 2
    * 3
4. C
5. D

#### Task List
```markdown
- [x] feed the cats
- [ ] Buy Milk
- [ ] Buy Cat Food
- [ ] Watch Game Of Thrones
- [x] Get Drunk
```
- [x] feed the cats
- [ ] Buy Milk
- [ ] Buy Cat Food
- [ ] Watch Game Of Thrones
- [x] Get Drunk

### Links
```Markdown
[Name Of Link](https://www.example.com)
```
[Name Of Link](https://www.example.com)

### Images
```Markdown
![Image](https://via.placeholder.com/350x150)
```
![Image](https://via.placeholder.com/350x150 "Alt Text")

### Tables
```markdown
| Name   | Age | Height |
|--------|-----|--------|
| Joe    | 26  | 172    |
| Peter  | 32  | 185    |
| Hannah | 19  | 164    |
```
| Name   | Age | Height |
|--------|-----|--------|
| Joe    | 26  | 172    |
| Peter  | 32  | 185    |
| Hannah | 19  | 164    |

### Code Blocks
<pre lang="no-highlight"><code>
```R
a <- c(1, 2, 3, 4, 5)
b <- c(5, 4, 3, 2, 1)

df <- data.frame(x = a, y = b)
```
</pre></code>
```R
a <- c(1, 2, 3, 4, 5)
b <- c(5, 4, 3, 2, 1)

df <- data.frame(x = a, y = b)
```

### Backslash Escapes

Markdown allows you to use backslash escapes to generate literal characters which would otherwise have special meaning in Markdown’s formatting syntax. For example, if you wanted to surround a word with literal asterisks \*Hello World\* you would need to backslash escape the character: `\*Hello World\*`

Markdown provides backslash escapes for the following characters:
```markdown
\   backslash
`   backtick
*   asterisk
_   underscore
{}  curly braces
[]  square brackets
()  parentheses
#   hash mark
+   plus sign
-   minus sign (hyphen)
.   dot
!   exclamation mark
```

## Caching

Sometimes part of an analysis is very time-consuming. Here I mean in CPU time, not thinking time—it is also true for thinking time, but you don’t need to think the same things over and over. If you are not careful, however, you will need to run the same analysis on the computer again and again.

To cache results in R Markdown, you add the code chunk option `cache = TRUE`.


### Exercise Add Caching
>Add a cached code chunk to your document. Make the code sample random numbers, e.g., using rnorm(). When you recompile the document, you should see that the random numbers do not change.

<details>
<summary>Click for solution</summary>
<p>

<pre lang="no-highlight"><code>
```{r cache-example, cache = TRUE}
randomNumbers <- rnorm(10) %>% print()
```
</pre></code>

</p>
</details>

### Excercise More Caching
>Make another cached chunk that uses the results of the first cached chunk. Say, compute the mean of the random numbers. Set up dependencies and verify that if you modify the first chunk, the second chunk gets evaluated.
<details>
<summary>Click for solution</summary>
<p>

<pre lang="no-highlight"><code>
```{r cache-example, cache = TRUE}
randomNumbers <- rnorm(10) %>% print()
```
</pre></code>

</p>
</details>

## Parameters
R Markdown documents can include one or more parameters whose values can be set when you render the report. The parameters should be declared in the YAML header, like the example below:
```R
---
title: "Document"
date: "4 September 2018 "
author: "Westerdals"
output: html_document
params:
  min: 1
  max: 100
---

... more stuff in the document
```

Using the parameters in the code chunks:
<pre lang="no-highlight"><code>
```{r sum, cache = TRUE}
v <- seq(params$min, params$max, by= 2)
v
```
</pre></code>




## Inline Code
Code results can be inserted directly into the text of a .Rmd file by enclosing the code with `r <variable-name>`. This is a nice feature to use when you want to change the document appearance based upon variables or results from functions.

<pre lang="no-highlight"><code>
```{r inline-code, include = FALSE}
color = "red"
# color = "yellow"
# color = "green"
# color = "blue"
```

# `r color`
</pre></code>

Expected output:
# red

## Tables
Sometimes we want to generate tables based upon dynamic values from our results. In the example below, we declare two code chunks. The first, named `data-frame` creates a new `data.frame` based upon two variables.

The next code chunk uses this `data.frame` to create a new table using the kable function in the knitr library. The table is generated with the first 5 rows of the `data.frame`.

<pre lang="no-highlight"><code>
```{r data-frame, include=FALSE}
a <- c(1, 2, 3, 4, 5, 60, 80)
b <- c(5, 4, 3, 2, 1, 50, 10)

df <- data.frame(x = a, y = b)
```

```{r table, echo=FALSE}
library(knitr)
kable(df[1:5,], caption = "A knittr kable")
```
</pre></code>



## References
Mailund, Thomas. Beginning Data Science in R. Apress, 2017.

RStudio. 2018. "Getting Started With R Markdown".                Rmarkdown.Rstudio.Com. https://rmarkdown.rstudio.com/lesson-1.html.

daringfireball.net. 2018. "Markdown: Syntax". Daring Fireball. https://daringfireball.net/projects/markdown/syntax.

